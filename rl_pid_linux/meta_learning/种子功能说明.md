# ğŸ² éšæœºç§å­åŠŸèƒ½è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

ä¸ºäº†ç¡®ä¿å®éªŒçš„**å¯é‡å¤æ€§**å’Œ**ç§‘å­¦ä¸¥è°¨æ€§**ï¼Œå·²ä¸ºæ‰€æœ‰æ‰°åŠ¨æµ‹è¯•è„šæœ¬æ·»åŠ éšæœºç§å­åŠŸèƒ½ã€‚

## âœ… å·²æ”¯æŒçš„è„šæœ¬

1. **`test_disturbance_scenarios.py`** - æ ‡å‡†æ‰°åŠ¨æµ‹è¯•
2. **`test_with_optimal_params.py`** - æœ€ä¼˜å‚æ•°æ‰°åŠ¨æµ‹è¯•

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ç”¨æ³•ï¼ˆæ— ç§å­ï¼‰

```bash
# ä½¿ç”¨éšæœºè¡Œä¸ºï¼ˆæ¯æ¬¡ç»“æœå¯èƒ½ä¸åŒï¼‰
python test_disturbance_scenarios.py --n_episodes 20
python test_with_optimal_params.py --n_episodes 20
```

### ä½¿ç”¨ç§å­ï¼ˆå¯é‡å¤ï¼‰

```bash
# ä½¿ç”¨ç§å­42è¿›è¡Œå¯é‡å¤å®éªŒ
python test_disturbance_scenarios.py --n_episodes 20 --seed 42
python test_with_optimal_params.py --n_episodes 20 --seed 42
```

### å¤šæ¬¡å®éªŒï¼ˆä¸åŒç§å­ï¼‰

```bash
# å®éªŒ1
python test_with_optimal_params.py --n_episodes 20 --seed 42

# å®éªŒ2ï¼ˆä¸åŒéšæœºæ€§ï¼‰
python test_with_optimal_params.py --n_episodes 20 --seed 123

# å®éªŒ3ï¼ˆå†æ¬¡éªŒè¯å®éªŒ1ï¼‰
python test_with_optimal_params.py --n_episodes 20 --seed 42  # ç»“æœåº”ä¸å®éªŒ1å®Œå…¨ä¸€è‡´
```

## ğŸ”§ æŠ€æœ¯å®ç°

### ç§å­è®¾ç½®å±‚çº§

1. **å…¨å±€ç§å­**ï¼šNumPyã€PyTorch
2. **ç¯å¢ƒç§å­**ï¼šPyBulletç¯å¢ƒresetæ—¶
3. **Episodeç§å­**ï¼šæ¯ä¸ªepisodeä½¿ç”¨ä¸åŒåç§»

### ç§å­åˆ†é…ç­–ç•¥

```python
# åŸºç¡€ç§å­ï¼ˆå‘½ä»¤è¡Œå‚æ•°ï¼‰
base_seed = 42

# ä¸åŒæ‰°åŠ¨ç±»å‹
disturbance_seeds = {
    'none': base_seed + 0*1000,           # 42
    'random_force': base_seed + 1*1000,   # 1042
    'payload': base_seed + 2*1000,        # 2042
    'param_uncertainty': base_seed + 3*1000,  # 3042
    'mixed': base_seed + 4*1000           # 4042
}

# ä¸åŒepisode
for episode in range(n_episodes):
    episode_seed = disturbance_seed + episode
    # Episode 0: 42 + 0 = 42
    # Episode 1: 42 + 1 = 43
    # ...
```

## ğŸ“Š å®éªŒå¯é‡å¤æ€§éªŒè¯

### éªŒè¯æ­¥éª¤

1. **é¦–æ¬¡è¿è¡Œ**
   ```bash
   python test_with_optimal_params.py --n_episodes 20 --seed 42 > run1.txt
   ```

2. **é‡å¤è¿è¡Œ**
   ```bash
   python test_with_optimal_params.py --n_episodes 20 --seed 42 > run2.txt
   ```

3. **æ¯”è¾ƒç»“æœ**
   ```bash
   diff run1.txt run2.txt
   # åº”è¯¥æ²¡æœ‰å·®å¼‚ï¼ˆé™¤äº†æ—¶é—´æˆ³ç­‰ï¼‰
   ```

### é¢„æœŸè¡Œä¸º

**âœ… ä½¿ç”¨ç›¸åŒç§å­**ï¼š
- Pure Meta-PIDè¯¯å·®å®Œå…¨ä¸€è‡´
- Meta-PID+RLè¯¯å·®å®Œå…¨ä¸€è‡´
- æ”¹è¿›ç™¾åˆ†æ¯”å®Œå…¨ä¸€è‡´
- å›¾è¡¨å®Œå…¨ä¸€è‡´

**âš ï¸ ä½¿ç”¨ä¸åŒç§å­æˆ–ä¸è®¾ç§å­**ï¼š
- è¯¯å·®ä¼šæœ‰éšæœºæ³¢åŠ¨ï¼ˆÂ±1-2Â°ï¼‰
- æ”¹è¿›ç™¾åˆ†æ¯”ç•¥æœ‰å·®å¼‚ï¼ˆÂ±0.5-1%ï¼‰
- æ•´ä½“è¶‹åŠ¿ä¸€è‡´

## ğŸ¯ è®ºæ–‡ä½¿ç”¨å»ºè®®

### ä¸»è¦å®éªŒï¼ˆè®ºæ–‡æ•°æ®ï¼‰

```bash
# ä½¿ç”¨å›ºå®šç§å­ç¡®ä¿å¯é‡å¤æ€§
python test_with_optimal_params.py \
    --n_episodes 20 \
    --seed 42 \
    > paper_results_seed42.txt
```

### é²æ£’æ€§éªŒè¯ï¼ˆé™„å½•æ•°æ®ï¼‰

```bash
# å¤šä¸ªç§å­éªŒè¯ç»“æœç¨³å®šæ€§
for seed in 42 123 456 789 2024; do
    python test_with_optimal_params.py \
        --n_episodes 20 \
        --seed $seed \
        > paper_results_seed${seed}.txt
done

# è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®
python analyze_multiple_seeds.py
```

## ğŸ“ è®ºæ–‡æè¿°å»ºè®®

åœ¨Methodséƒ¨åˆ†æ·»åŠ ï¼š

> **Reproducibility**: To ensure experimental reproducibility, all disturbance tests were conducted using fixed random seeds (seed=42). For each disturbance type, we used distinct seed offsets (base_seed + disturbance_id Ã— 1000) to ensure statistical independence while maintaining reproducibility. Within each disturbance scenario, individual episodes used incrementally offset seeds (episode_seed = disturbance_seed + episode_id).

åœ¨Resultséƒ¨åˆ†æ·»åŠ ï¼š

> All reported results were obtained using random seed 42 and represent the mean Â± standard deviation across 20 independent episodes per disturbance scenario. To verify robustness, we repeated experiments with multiple seeds (42, 123, 456, 789, 2024) and observed consistent performance trends (see Appendix).

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. PyBulletéšæœºæ€§

PyBulletçš„æŸäº›ç‰©ç†è¡Œä¸ºå¯èƒ½å­˜åœ¨å¾®å°çš„ä¸ç¡®å®šæ€§ï¼ˆ<0.1%ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

### 2. ç¡¬ä»¶å·®å¼‚

ä¸åŒç¡¬ä»¶ï¼ˆCPU/GPUï¼‰å¯èƒ½å¯¼è‡´æ•°å€¼è®¡ç®—çš„å¾®å°å·®å¼‚ï¼Œä½†ä¸åº”å½±å“æ•´ä½“ç»“è®ºã€‚

### 3. å¹¶è¡Œç¯å¢ƒ

å¦‚æœä½¿ç”¨å¤šä¸ªå¹¶è¡Œç¯å¢ƒï¼ˆn_envs>1ï¼‰ï¼Œéœ€è¦ä¸ºæ¯ä¸ªç¯å¢ƒè®¾ç½®ä¸åŒçš„ç§å­ã€‚

### 4. RLæ¨¡å‹åŠ è½½

PPOæ¨¡å‹çš„åŠ è½½æ˜¯ç¡®å®šæ€§çš„ï¼Œä½¿ç”¨ç›¸åŒç§å­å’Œç›¸åŒæ¨¡å‹ä¼šäº§ç”Ÿç›¸åŒçš„actionã€‚

## ğŸ” è°ƒè¯•ç§å­é—®é¢˜

å¦‚æœç»“æœä¸å¯é‡å¤ï¼Œæ£€æŸ¥ï¼š

1. **ç§å­è®¾ç½®**
   ```python
   print(f"Using seed: {seed}")
   print(f"NumPy random state: {np.random.get_state()[1][0]}")
   print(f"PyTorch seed: {torch.initial_seed()}")
   ```

2. **ç¯å¢ƒé‡ç½®**
   ```python
   obs, _ = env.reset(seed=episode_seed)
   print(f"Episode {episode} seed: {episode_seed}")
   ```

3. **åŠ¨ä½œç¡®å®šæ€§**
   ```python
   action, _ = model.predict(obs, deterministic=True)  # deterministic=True
   ```

## ğŸ“š ç›¸å…³å‚æ•°

| å‚æ•° | é»˜è®¤å€¼ | ç±»å‹ | è¯´æ˜ |
|------|--------|------|------|
| `--seed` | `None` | `int` | éšæœºç§å­ï¼ŒNoneè¡¨ç¤ºä½¿ç”¨éšæœºè¡Œä¸º |
| `--n_episodes` | 10 | `int` | æ¯ç§æ‰°åŠ¨çš„æµ‹è¯•å›åˆæ•° |
| `--robot` | `franka_panda/panda.urdf` | `str` | æœºå™¨äººURDFæ–‡ä»¶ |
| `--model` | `logs/.../ best_model` | `str` | RLæ¨¡å‹è·¯å¾„ |

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å¼€å‘è°ƒè¯•**ï¼šä¸ä½¿ç”¨ç§å­ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰
2. **åˆæ­¥æµ‹è¯•**ï¼šä½¿ç”¨å›ºå®šç§å­ï¼ˆéªŒè¯ä»£ç ï¼‰
3. **è®ºæ–‡å®éªŒ**ï¼šä½¿ç”¨å›ºå®šç§å­ï¼ˆå¯é‡å¤æ€§ï¼‰
4. **é²æ£’æ€§éªŒè¯**ï¼šä½¿ç”¨å¤šä¸ªç§å­ï¼ˆç»Ÿè®¡æ˜¾è‘—æ€§ï¼‰
5. **æœ€ç»ˆå‘å¸ƒ**ï¼šæä¾›ç§å­å€¼å’Œå®Œæ•´å‘½ä»¤ï¼ˆé€æ˜åº¦ï¼‰

---

**ä½œè€…**: Meta-PID+RL Team  
**æ›´æ–°**: 2025-11-01

