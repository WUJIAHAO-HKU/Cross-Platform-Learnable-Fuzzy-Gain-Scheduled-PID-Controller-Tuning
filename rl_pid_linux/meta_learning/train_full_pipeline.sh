#!/bin/bash
# å®Œæ•´è®­ç»ƒæµç¨‹è‡ªåŠ¨åŒ–è„šæœ¬
# ç”¨é€”ï¼šå…ƒå­¦ä¹ è®­ç»ƒ + RLè®­ç»ƒ + æ€§èƒ½è¯„ä¼°

set -e

export META_DIR="/home/wujiahao/åŸºäºå¼ºåŒ–å­¦ä¹ çš„æ¨¡å‹é¢„æµ‹æ§åˆ¶åŠ¨åŠ›å­¦æ¨¡å‹è¯¯å·®åœ¨çº¿è¡¥å¿æ–¹æ³•ç ”ç©¶/rl_pid_linux/meta_learning"
cd $META_DIR
source ~/rl_robot_env/bin/activate

echo "=========================================="
echo "ğŸš€ å®Œæ•´è®­ç»ƒæµç¨‹"
echo "=========================================="
echo ""

echo "=========================================="
echo "æ­¥éª¤1: è®­ç»ƒå…ƒå­¦ä¹ PIDé¢„æµ‹å™¨"
echo "é¢„è®¡æ—¶é—´: 2åˆ†é’Ÿ"
echo "=========================================="
python train_with_augmentation.py | tee meta_pid_training.log

echo ""
echo "=========================================="
echo "æ­¥éª¤2: è®­ç»ƒè‡ªé€‚åº”RLç­–ç•¥ï¼ˆFranka Pandaï¼‰"
echo "é¢„è®¡æ—¶é—´: 3-5åˆ†é’Ÿ"
echo "è®­ç»ƒæ­¥æ•°: 200,000æ­¥ï¼ˆæœ€ä¼˜é…ç½®ï¼‰"
echo "å¹¶è¡Œç¯å¢ƒ: 4ä¸ª"
echo "=========================================="
python train_meta_rl_combined.py franka_panda/panda.urdf 200000 4

echo ""
echo "=========================================="
echo "æ­¥éª¤3: è¯„ä¼°æ€§èƒ½ï¼ˆå½’ä¸€åŒ–è¯¯å·®ï¼‰"
echo "=========================================="
python evaluate_meta_rl.py

echo ""
echo "=========================================="
echo "æ­¥éª¤4: éªŒè¯å®é™…è·Ÿè¸ªè¯¯å·®ï¼ˆå¼§åº¦/è§’åº¦ï¼‰"
echo "=========================================="
python verify_actual_tracking_error.py

echo ""
echo "=========================================="
echo "âœ… å®Œæ•´è®­ç»ƒæµç¨‹å®Œæˆï¼"
echo "=========================================="
echo "æ¨¡å‹è·¯å¾„: logs/meta_rl_panda/best_model/best_model.zip"
echo "å›¾è¡¨è·¯å¾„: actual_tracking_comparison.png"
echo ""
echo "å…³é”®ç»“æœï¼š"
echo "- å¹³å‡è¯¯å·®æ”¹å–„: çº¦25%"
echo "- æœ€å¤§è¯¯å·®æ”¹å–„: çº¦32%"
echo "- æ ‡å‡†å·®æ”¹å–„: çº¦61%"
echo ""
echo "æŸ¥çœ‹è¯¦ç»†ç»“æœ: cat è®ºæ–‡ç»“æœæ€»ç»“.md"

