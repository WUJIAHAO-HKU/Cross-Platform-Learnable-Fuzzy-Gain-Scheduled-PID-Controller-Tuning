# ============================================================================
# 阶段1训练配置：极度保守（诊断版）
# 目标：首先确保PID稳定，然后逐步加入RL
# ============================================================================

# 机器人配置
robot:
  name: "franka_panda"
  init_position: [0.0, -0.3, 0.0, -2.2, 0.0, 2.0, 0.79]

# 仿真参数
simulation:
  time_step: 0.001  # 1kHz
  gravity: [0, 0, -9.81]

# PID参数（降低增益，提高稳定性）
pid_params:
  # ⭐ 降低Kp（原来50太大）
  Kp: [30.0, 30.0, 30.0, 30.0, 15.0, 8.0, 8.0]
  # ⭐ 降低Ki（避免积分饱和）
  Ki: [0.2, 0.2, 0.2, 0.2, 0.1, 0.05, 0.05]
  # ⭐ Kd保持不变
  Kd: [5.0, 5.0, 5.0, 5.0, 2.0, 1.0, 1.0]

# RL参数（超保守配置）
rl_params:
  # ⭐ 补偿策略（极小）
  delta_scale_min: 0.2      # 从0.2开始（原来0.5）
  delta_scale_max: 1.0      # 最大只到1.0（原来2.0）
  delta_tau_clip: 5.0       # 降低限幅（原来10.0）
  
  # ⭐ 延长预热期
  warmup_disable_steps: 500   # 前500步纯PID（原来100）
  warmup_ramp_steps: 2000     # 2000步渐进（原来500）
  
  # ⭐ 奖励权重（降低尺度）
  w_track: 10.0      # 降低跟踪权重（原来20.0）
  w_vel: 0.0005      # 降低速度惩罚（原来0.001）
  w_action: 0.0001   # 保持不变
  w_delta: 0.0001    # 保持不变
  
  # 网络结构（简化）
  actor_hidden: [256, 128, 64]        # 简化网络
  critic_hidden: [256, 256, 128]      # 简化网络
  
  # 学习率（降低）
  learning_rate_actor: 0.0003    # 降低（原来0.0005）
  learning_rate_critic: 0.0003   # 降低（原来0.0005）
  
  # DDPG超参数（保守配置）
  buffer_size: 100000    # 减小buffer（原来200000）
  batch_size: 256        # 使用较小batch（原来1024）
  gamma: 0.99
  tau: 0.003             # 更低的tau（原来0.005）
  
  # 探索噪声（最小化）
  noise_std: 0.15        # 降低初始噪声（原来0.2）
  noise_decay: 0.999999
  noise_min: 0.03        # 降低最小噪声（原来0.05）

# 轨迹配置（降低难度）
trajectory:
  type: "circle"
  speed: 0.2           # 降低速度（原来0.3）
  amplitude: 0.15      # 降低幅度（原来0.2）

# 训练配置
training:
  total_timesteps: 500000  # 50万步
  eval_freq: 10000
  n_eval_episodes: 5
  save_freq: 50000
  log_interval: 100

# 环境配置
max_steps: 10000  # 每个episode最多10秒

# 并行环境
n_envs: 1  # 单环境，便于调试

