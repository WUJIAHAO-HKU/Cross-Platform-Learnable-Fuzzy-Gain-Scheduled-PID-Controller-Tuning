# ============================================================================
# 阶段1训练配置：小补偿（保守策略）
# 目标：验证系统稳定性，delta_scale_max=2.0
# 预计训练时间：2-4小时
# ============================================================================

# 机器人配置
robot:
  name: "franka_panda"
  init_position: [0.0, -0.3, 0.0, -2.2, 0.0, 2.0, 0.79]

# 仿真参数
simulation:
  time_step: 0.001  # 1kHz
  gravity: [0, 0, -9.81]

# PID参数
pid_params:
  Kp: [100.0, 100.0, 100.0, 100.0, 40.0, 20.0, 20.0]
  Ki: [0.5, 0.5, 0.5, 0.5, 0.2, 0.1, 0.1]
  Kd: [5.0, 5.0, 5.0, 5.0, 2.0, 1.0, 1.0]

# RL参数（阶段1：保守配置）
rl_params:
  # 补偿策略
  delta_scale_min: 0.5
  delta_scale_max: 2.0  # ⭐ 阶段1：小补偿
  delta_tau_clip: 10.0
  
  # 渐进式策略
  warmup_disable_steps: 100
  warmup_ramp_steps: 500
  
  # 奖励权重（平衡版）
  w_track: 20.0
  w_vel: 0.001
  w_action: 0.0001
  w_delta: 0.0001
  
  # 网络结构
  actor_hidden: [512, 256, 128]
  critic_hidden: [256, 256, 512, 256]
  
  # 学习率
  learning_rate_actor: 0.0005
  learning_rate_critic: 0.0005
  
  # DDPG超参数
  buffer_size: 200000  # 增大缓冲区（GPU足够）
  batch_size: 1024     # ⭐ 稳定训练配置（4096太激进，导致训练崩溃）
  gamma: 0.99
  tau: 0.005           # 降低tau提高稳定性
  
  # 探索噪声
  noise_std: 0.2         # 降低初始噪声（0.3太大导致不稳定）
  noise_decay: 0.999999
  noise_min: 0.05        # 降低最小噪声

# 轨迹配置
trajectory:
  type: "circle"
  speed: 0.3
  amplitude: 0.2

# 训练配置
training:
  total_timesteps: 500000  # 50万步
  eval_freq: 10000
  n_eval_episodes: 5
  save_freq: 50000
  log_interval: 100

# 环境配置
max_steps: 10000  # 每个episode最多10秒

# 并行环境数量（可选，默认1）
n_envs: 1  # 推荐2-4个，不要超过CPU核心数！
# ⚠️ 不建议超过8个，4096会导致系统崩溃！

